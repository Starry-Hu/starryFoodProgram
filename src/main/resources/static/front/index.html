<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>StarryFood</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/zerogrid.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/main.css">

</head>

<body>
<div class="wrap-body">
    <header class="zerogrid">
        <div class="logo">
            <hr class="line-1">
            <a href="#">StarryFood</a>
            <span>食 - 人生之大事</span>
            <hr class="line-1">
        </div>
        <div id='cssmenu' class="align-center">
            <ul>
                <li class="active"><a href='index.html'><span>Home</span></a></li>
                <li><a href='menu.html'><span>Menu</span></a></li>
                <li class='last'><a href='my.html'><span>My</span></a></li>

                <p class="rightElem" id="logout"><a><span>退出登录</span></a></p>
                <p class="rightElem" id="editPersonInfo"><a href='#'><span>123</span></a></p>
            </ul>
        </div>
    </header>
    <section id="container">
        <div class="wrap-container">
            <!-----------------content-box-1-------------------->
            <section class="content-box background-gray box-1 zerogrid">
                <div class="row wrap-box">
                    <!--Start Box-->
                    <div class="col-1-2">
                        <div class="wrap-col">
                            <div style="padding-top: 60px;">
                                <center><img src="images/4.png"></center>
                            </div>
                        </div>
                    </div>
                    <div class="col-1-2">
                        <div class="wrap-col">
                            <div class="row">
                                <div class="t-center" style="padding-top: 30px;">
                                    <div class="header">
                                        <h2>Delicious<span class="color-red">meat</span></h2>
                                    </div>
                                    <strong>减肥必备,低脂高蛋白的鸡胸肉也可以很美味</strong><br/><br>
                                    <span>鸡胸脯肉蛋白质含量较高，且易被人体吸收入利用，有增强体力，强壮身体的作用，所含对人体生长发育有重要作用的磷脂类，是中国人膳食结构中脂肪和磷脂的重要来源之一。因为鸡胸脯肉是高蛋白，低脂肪的食材，所以对正在减肥没你来说一定是一个不错的选择。</span><br/><br>
                                    <a href="foodDetail.html?foodId=1" class="button">More Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-----------------content-box-2-------------------->
            <section class="content-box background-white box-2 zerogrid">
                <div class="row wrap-box">
                    <!--Start Box-->
                    <div class="col-1-2 f-right">
                        <div class="wrap-col">
                            <div style="padding-top: 60px;">
                                <center><img src="images/3.png"></center>
                            </div>
                        </div>
                    </div>
                    <div class="col-1-2">
                        <div class="wrap-col">
                            <div class="row">
                                <div class="t-center" style="padding-top: 30px;">
                                    <div class="header">
                                        <h2>Salads:</h2>
                                    </div>
                                    <strong>减脂必备：有机鸡肉咖喱沙拉</strong><br/><br>
                                    <span>有机鸡肉咖喱沙拉，既有营养又口感丰富，有机鸡肉口感嫩滑，咖喱和苹果醋的香气相得益彰，鸡肉、法诺和坚果的搭配正好软硬适中。</span><br/><br>
                                    <a href="foodDetail.html?foodId=2" class="button">More Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-----------------content-box-3-------------------->
            <section class="content-box background-gray box-3 zerogrid">
                <div class="row wrap-box">
                    <!--Start Box-->
                    <div class="col-1-2">
                        <div class="wrap-col">
                            <div style="padding-top: 60px;">
                                <center><img src="images/1.png"></center>
                            </div>
                        </div>
                    </div>
                    <div class="col-1-2">
                        <div class="wrap-col">
                            <div class="row">
                                <div class="t-center" style="padding-top: 30px;">
                                    <div class="header">
                                        <h2>Noodle menu:</h2>
                                    </div>
                                    <strong>奶油蘑菇意面</strong><br/><br>
                                    <span>奶油蘑菇意面主要是以蘑菇，意大利面为主要食材的菜品，千万不要以为是白酱就觉得淡而无味，相反，味道特别鲜美，入口是厚重的奶香，其中有蘑菇的鲜味，培根的香味，最后是调味和奶油香气收尾，配合的特别完美。</span><br/><br>
                                    <a href="foodDetail.html?foodId=3" class="button">More Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </section>
    <div id="shoppingCart">
        <a href="cartList.html" target="_Blank"><img src="images/shoppingCart.png" alt=" "></a>
    </div>
    <hr class="line">

    <footer>
        <div class="wrap-footer">
            <div class="zerogrid">
                <div class="wrap-col">
                    <p>Copyright - StarryHu</p>
                </div>
            </div>
        </div>
    </footer>
</div>

<script type="text/javascript" src="js/jquery-3.3.1.js"></script>
<script type="text/javascript" src="lib/layui/layui.js"></script>
<script>
    layui.use(['layer'], function () {
        // 请求的基本路径
        const path = location.protocol + "//" + window.location.host + "/starryfood";

        $(function () {
            // 获取当前登录用户信息
            $.ajax({
                type: "get",
                url: path + "/customer/getLoginedCustomer",
                dataType: "json",
                success: function (response) {
                    if (response.code != '0') {
                        layer.msg(`${response.msg}`, {
                            time: 1500,
                            end: function () {
                                // 未登陆时跳转到登录页面
                                if (response.code == '397') location.href = "login.html";
                            }
                        })
                    } else {
                        // 将用户名取出来显示
                        $('#editPersonInfo span').text(response.data.customerName);
                        $('#editPersonInfo').bind('click', function () {
                            layer.open({
                                title: '修改个人信息',
                                type: 2,
                                content: 'editPersonInfo.html',
                                area: ['500px', '400px'],
                                // offset: '20%',
                                shade: 0.5,
                                shadeClose: true,//点击遮罩关闭
                                end: function () { //最后执行reload，刷新页面（以更新用户名）
                                    location.reload();
                                }
                            });
                        });
                    }
                }
            });
        })

        // 退出登录
        $('#logout').click(function () {
            $.ajax({
                type: "get",
                url: path + "/customer/logout",
                dataType: "json",
                success: function (response) {
                    if (response.code == '0') {
                        layer.msg('欢迎下次光临 ~ ', {
                            time: 1500,
                            end: function () {
                                location.href = "login.html";
                            }
                        })
                    }
                }
            });
        })
    })
</script>
</body>

</html>